"use strict";(self.webpackChunk_folio_stripes_components=self.webpackChunk_folio_stripes_components||[]).push([[5622],{"./lib/HotKeys/stories/HotKeys.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  CommandList: () => (/* binding */ HotKeys_stories_CommandList),\n  _BasicUsage: () => (/* binding */ _BasicUsage),\n  __namedExportsOrder: () => (/* binding */ __namedExportsOrder),\n  "default": () => (/* binding */ HotKeys_stories)\n});\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__("./node_modules/react/index.js");\n// EXTERNAL MODULE: ./node_modules/@storybook/addon-actions/dist/index.mjs + 1 modules\nvar dist = __webpack_require__("./node_modules/@storybook/addon-actions/dist/index.mjs");\n// EXTERNAL MODULE: ./lib/TextField/TextField.js\nvar TextField = __webpack_require__("./lib/TextField/TextField.js");\n// EXTERNAL MODULE: ./lib/Button/Button.js + 1 modules\nvar Button = __webpack_require__("./lib/Button/Button.js");\n// EXTERNAL MODULE: ./lib/MultiColumnList/MultiColumnList.js + 17 modules\nvar MultiColumnList = __webpack_require__("./lib/MultiColumnList/MultiColumnList.js");\n// EXTERNAL MODULE: ./node_modules/@folio/stripes-react-hotkeys/index.es.js\nvar index_es = __webpack_require__("./node_modules/@folio/stripes-react-hotkeys/index.es.js");\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__("./node_modules/react/jsx-runtime.js");\n;// CONCATENATED MODULE: ./lib/HotKeys/stories/BasicUsage.js\n/**\n * HotKeys -> Basic usage\n */\n\n\n\n\n\n\n\n\nconst outerOuterEnter = (0,dist/* action */.XI)(\'outer_outer_enter\');\nconst outerInnerEnter = (0,dist/* action */.XI)(\'outer_inner_enter\');\nconst innerOuterEnter = (0,dist/* action */.XI)(\'inner_outer_enter\');\nconst innerInnerEnter = (0,dist/* action */.XI)(\'inner_inner_enter\');\nconst tabOuterHandler = (0,dist/* action */.XI)(\'tabOuter\');\nconst tabInnerHandler = (0,dist/* action */.XI)(\'tabInner\');\nconst altOuterHandler = (0,dist/* action */.XI)(\'altOuter\');\nconst altInnerHandler = (0,dist/* action */.XI)(\'altInner\');\nconst outerDownHandler = (0,dist/* action */.XI)(\'downHandler\');\nconst outerKeyMap = {\n  \'ENTER_OUTER\': \'enter\',\n  \'TAB\': \'tab\'\n};\nconst innerKeyMap = {\n  \'ENTER_INNER\': \'enter\',\n  \'ALT\': \'alt\'\n};\nconst outerHandlers = {\n  \'ENTER_OUTER\': outerOuterEnter,\n  \'TAB\': tabOuterHandler,\n  \'ENTER_INNER\': outerInnerEnter,\n  \'ALT\': altOuterHandler\n};\nconst innerHandlers = {\n  \'ENTER_OUTER\': innerOuterEnter,\n  \'TAB\': tabInnerHandler,\n  \'ENTER_INNER\': innerInnerEnter,\n  \'ALT\': altInnerHandler\n};\nconst alternativeOuterKey = {\n  \'TAB\': \'down\'\n};\nconst alternativeOuterHandler = {\n  \'TAB\': outerDownHandler\n};\nconst hotkeyData = [{\n  HotKey: \'alt\',\n  outerField: \'not mapped\',\n  innerField: \'altInner\'\n}, {\n  HotKey: \'enter\',\n  outerField: \'outer_outer_enter\',\n  innerField: \'inner_inner_enter\'\n}, {\n  HotKey: \'tab\',\n  outerField: \'tabOuter\',\n  innerField: \'tabInner\'\n}];\nconst BasicUsage = () => {\n  const [value, setValue] = (0,react.useState)(\'fill\');\n  const [outerH, setOuterH] = (0,react.useState)(outerHandlers);\n  const [outerK, setOuterK] = (0,react.useState)(outerKeyMap);\n  const changeKey = () => {\n    setOuterK(current => {\n      return Object.assign({}, current, alternativeOuterKey);\n    });\n  };\n  const changeHandler = () => {\n    setOuterH(current => {\n      return Object.assign({}, current, alternativeOuterHandler);\n    });\n  };\n\n  /* eslint-disable max-len */\n  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {\n    children: [/*#__PURE__*/(0,jsx_runtime.jsx)("h2", {\n      children: "HotKeys"\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)("p", {\n      children: "This table describes the mapping of the keyboard keys for the below example. In code, the tab key is mapped at the outside level, and the inner field applies its own handler. \\"ALT\\" is only mapped to the inner field. You can see output from pressing hot keys in the \\"Action Logger\\" panel below."\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)(MultiColumnList/* default */.A, {\n      contentData: hotkeyData\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)("p", {\n      children: "The scope of a hotKey\'s affect in the UI is dictated by focus. When your focus indicator (blue outline in most browsers) is within the blue (outer) or orange (inner) borders, the scope is to the corresponding HotKeys instance."\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)(index_es.HotKeys, {\n      keyMap: outerK,\n      handlers: outerH,\n      id: "outer",\n      children: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {\n        style: {\n          border: \'1px dashed blue\',\n          padding: \'10px\'\n        },\n        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(TextField/* default */.A, {\n          label: "Outer field",\n          value: value,\n          onChange: e => {\n            setValue(e.target.value);\n          }\n        }), /*#__PURE__*/(0,jsx_runtime.jsx)(index_es.HotKeys, {\n          keyMap: innerKeyMap,\n          handlers: innerHandlers,\n          id: "inner",\n          children: /*#__PURE__*/(0,jsx_runtime.jsx)("div", {\n            style: {\n              border: \'1px dashed orange\',\n              padding: \'10px\'\n            },\n            children: /*#__PURE__*/(0,jsx_runtime.jsx)(TextField/* default */.A, {\n              label: "Inner field"\n            })\n          })\n        })]\n      })\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)("p", {\n      children: "The buttons below will modify the mapped keys of the outer field. The \\"Change Key\\" button will map the \\"Tab\\" handler to the \\"down\\" arrow. The \\"Change Handler\\" button will map a \\"downHandler\\" to the \\"Tab\\" mapping."\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.A, {\n      type: "button",\n      onClick: changeKey,\n      children: "Change Tab key mapping to Down key"\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.A, {\n      type: "button",\n      onClick: changeHandler,\n      children: "Change Tab (or Down?) key handler to a Down key handler"\n    })]\n  });\n};\nBasicUsage.displayName = "BasicUsage";\n/* eslint-enable max-len */\n/* harmony default export */ const stories_BasicUsage = (BasicUsage);\n;\nBasicUsage.__docgenInfo = {\n  "description": "",\n  "methods": [],\n  "displayName": "BasicUsage"\n};\n// EXTERNAL MODULE: ./node_modules/prop-types/index.js\nvar prop_types = __webpack_require__("./node_modules/prop-types/index.js");\nvar prop_types_default = /*#__PURE__*/__webpack_require__.n(prop_types);\n;// CONCATENATED MODULE: ./lib/Commander/CommandList.js\n\n\n\n\nclass CommandList extends react.Component {\n  generateHotKeysProps() {\n    const {\n      commands\n    } = this.props;\n    const keyMap = {};\n    const handlers = {};\n    commands.forEach(c => {\n      keyMap[c.name] = c.shortcut || \'\';\n      if (c.handler) {\n        handlers[c.name] = c.handler;\n      }\n    });\n    return {\n      keyMap,\n      handlers\n    };\n  }\n  render() {\n    const {\n      children,\n      id\n    } = this.props;\n    return /*#__PURE__*/(0,jsx_runtime.jsx)(index_es.HotKeys, {\n      id: id,\n      ...this.generateHotKeysProps(),\n      noWrapper: true,\n      children: children\n    });\n  }\n}\nCommandList.propTypes = {\n  children: (prop_types_default()).node,\n  commands: prop_types_default().arrayOf(prop_types_default().shape({\n    handler: (prop_types_default()).func,\n    label: prop_types_default().oneOfType([(prop_types_default()).string, (prop_types_default()).func, (prop_types_default()).node]),\n    name: (prop_types_default()).string.isRequired,\n    shortcut: (prop_types_default()).string\n  })).isRequired,\n  id: (prop_types_default()).string\n};\nCommandList.displayName = "CommandList";\n/* harmony default export */ const Commander_CommandList = (CommandList);\n;\nCommandList.__docgenInfo = {\n  "description": "",\n  "methods": [{\n    "name": "generateHotKeysProps",\n    "docblock": null,\n    "modifiers": [],\n    "params": [],\n    "returns": null\n  }],\n  "displayName": "CommandList",\n  "props": {\n    "children": {\n      "description": "",\n      "type": {\n        "name": "node"\n      },\n      "required": false\n    },\n    "commands": {\n      "description": "",\n      "type": {\n        "name": "arrayOf",\n        "value": {\n          "name": "shape",\n          "value": {\n            "handler": {\n              "name": "func",\n              "required": false\n            },\n            "label": {\n              "name": "union",\n              "value": [{\n                "name": "string"\n              }, {\n                "name": "func"\n              }, {\n                "name": "node"\n              }],\n              "required": false\n            },\n            "name": {\n              "name": "string",\n              "required": true\n            },\n            "shortcut": {\n              "name": "string",\n              "required": false\n            }\n          }\n        }\n      },\n      "required": true\n    },\n    "id": {\n      "description": "",\n      "type": {\n        "name": "string"\n      },\n      "required": false\n    }\n  }\n};\n// EXTERNAL MODULE: ./node_modules/react-intl/lib/src/components/message.js\nvar message = __webpack_require__("./node_modules/react-intl/lib/src/components/message.js");\n// EXTERNAL MODULE: ./node_modules/lodash/mapValues.js\nvar lodash_mapValues = __webpack_require__("./node_modules/lodash/mapValues.js");\n;// CONCATENATED MODULE: ./lib/Commander/keyboardShortcuts.js\n\n\n\n\nconst expandAllSections = (e, accordionStatusRef) => {\n  e.preventDefault();\n  const {\n    setStatus\n  } = accordionStatusRef.current;\n  setStatus(cur => ({\n    ...cur,\n    status: mapValues(cur.status, () => true)\n  }));\n};\nconst collapseAllSections = (e, accordionStatusRef) => {\n  e.preventDefault();\n  const {\n    setStatus\n  } = accordionStatusRef.current;\n  setStatus(cur => ({\n    ...cur,\n    status: mapValues(cur.status, () => false)\n  }));\n};\nconst checkScope = () => {\n  return document.body.contains(document.activeElement);\n};\nconst defaultKeyboardShortcuts = [{\n  label: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.A, {\n    id: "stripes-components.shortcut.createRecord"\n  }),\n  name: \'new\',\n  shortcut: \'alt + n\'\n}, {\n  label: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.A, {\n    id: "stripes-components.shortcut.editRecord"\n  }),\n  name: \'edit\',\n  shortcut: \'mod + alt + e\'\n}, {\n  label: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.A, {\n    id: "stripes-components.shortcut.saveRecord"\n  }),\n  name: \'save\',\n  shortcut: \'mod + s\'\n}, {\n  label: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.A, {\n    id: "stripes-components.shortcut.duplicateRecord"\n  }),\n  name: \'duplicateRecord\',\n  shortcut: \'alt + c\'\n}, {\n  label: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.A, {\n    id: "stripes-components.shortcut.expandAll"\n  }),\n  name: \'expandAllSections\',\n  shortcut: \'mod + alt + b\'\n}, {\n  label: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.A, {\n    id: "stripes-components.shortcut.collapseAll"\n  }),\n  name: \'collapseAllSections\',\n  shortcut: \'mod + alt + g\'\n}, {\n  label: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.A, {\n    id: "stripes-components.shortcut.expandOrCollapse"\n  }),\n  name: \'expandOrCollapseAccordion\',\n  shortcut: \'spacebar\'\n}, {\n  label: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.A, {\n    id: "stripes-components.shortcut.goToSearchFilter"\n  }),\n  name: \'search\',\n  shortcut: \'mod + alt + h\'\n}, {\n  label: /*#__PURE__*/(0,jsx_runtime.jsx)(message/* default */.A, {\n    id: "stripes-components.shortcut.openShortcutModal"\n  }),\n  name: \'openShortcutModal\',\n  shortcut: \'mod + alt + k\'\n}];\n\n// list of default keyboard shortcut names [\'new\', \'edit\', \'save\']\nconst keyboardShortcutNames = defaultKeyboardShortcuts.map(_ref => {\n  let {\n    name\n  } = _ref;\n  return name;\n});\n\n/* function to import specific shortcuts relevant to the app. Takes in an array with\n   shortcut names [\'new\', \'save\', \'duplicateRecord\'] and returns an array of requested\n   shortcuts entries from the defaultKeyboardShortcuts array prserving the order of entries */\nconst importShortcuts = function () {\n  let shortcutNamesArray = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  const filteredShortcutsArray = []; // array that contains specific requested shortcuts from the app\n\n  for (const shortcut of defaultKeyboardShortcuts) {\n    if (shortcutNamesArray.find(shortcutName => shortcutName?.toLowerCase() === shortcut?.name?.toLowerCase())) {\n      filteredShortcutsArray.push(shortcut);\n    }\n  }\n  return filteredShortcutsArray;\n};\n\n/* function that overrides the labels of the default shortcuts to be displayed\n   Eg: The \'new\' default shortcut renders its label as `New`. If the app wants it displayed as `New resource` instead,\n   you could call the renameShortcutLabels function as\n   `renameShortcutLabels(shortcutsArray, [{ \'shortcut\': \'new\', \'label\': \'<FormatedMessage id="ui-app.newResource\'}]\n   Note: shortcutsArray contains the list of shortcuts with labels you want to be modified. eg: defaultKeyboardShortcuts\n*/\nconst renameShortcutLabels = function () {\n  let shortcutsArray = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let newLabelsArray = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  if (newLabelsArray.length === 0) return shortcutsArray;\n  return shortcutsArray.map(shortcutObj => {\n    const {\n      name\n    } = shortcutObj;\n    const entryWithShortcut = newLabelsArray.find(_ref2 => {\n      let {\n        shortcut\n      } = _ref2;\n      return shortcut?.toLowerCase() === name?.toLowerCase();\n    });\n    return entryWithShortcut ? {\n      ...shortcutObj,\n      label: entryWithShortcut.label\n    } : shortcutObj;\n  });\n};\n\n// EXTERNAL MODULE: ./node_modules/lodash/isEqual.js\nvar isEqual = __webpack_require__("./node_modules/lodash/isEqual.js");\nvar isEqual_default = /*#__PURE__*/__webpack_require__.n(isEqual);\n;// CONCATENATED MODULE: ./lib/Commander/HasCommand.js\n/*\n* HasCommand applies a keyboard shortcut to a wrapped section of the UI\n* Given a \'name\' prop, it assigns a handler function to the associated\n* Shortcut from a parent \'CommandList\'\n*/\n\n\n\n\n\n\nclass HasCommand extends react.Component {\n  constructor(props) {\n    super(props);\n    this.getHandlers = this.getHandlers.bind(this);\n    this.getKeyMap = this.getKeyMap.bind(this);\n    this.handlers = this.getHandlers();\n    this.keyMap = this.getKeyMap();\n  }\n  componentDidUpdate(prevProps) {\n    const {\n      commands\n    } = this.props;\n    if (!isEqual_default()(commands, prevProps.commands)) {\n      this.handlers = this.getHandlers();\n      this.keyMap = this.getKeyMap();\n      this.forceUpdate();\n    }\n  }\n  getHandlers() {\n    const {\n      commands\n    } = this.props;\n    const handlers = {};\n    commands.forEach(c => {\n      if (c.handler) {\n        handlers[c.name] = c.handler;\n      }\n    });\n    return handlers;\n  }\n  getKeyMap() {\n    const {\n      commands\n    } = this.props;\n    const keyMap = {};\n    commands.forEach(c => {\n      if (c.shortcut) {\n        keyMap[c.name] = c.shortcut;\n      }\n    });\n    if (Object.keys(keyMap).length === 0) {\n      return null;\n    }\n    return keyMap;\n  }\n  render() {\n    const {\n      children,\n      id,\n      isWithinScope,\n      scope\n    } = this.props;\n    return /*#__PURE__*/(0,jsx_runtime.jsx)(index_es.HotKeys, {\n      id: id,\n      keyMap: this.keyMap,\n      handlers: this.handlers,\n      focused: isWithinScope,\n      attach: scope,\n      noWrapper: true,\n      children: children\n    });\n  }\n}\nHasCommand.propTypes = {\n  children: prop_types_default().oneOfType([(prop_types_default()).node, prop_types_default().arrayOf((prop_types_default()).node)]).isRequired,\n  commands: prop_types_default().arrayOf((prop_types_default()).object),\n  id: (prop_types_default()).string,\n  isWithinScope: (prop_types_default()).func,\n  scope: prop_types_default().oneOfType([(prop_types_default()).node, prop_types_default().instanceOf(Element), (prop_types_default()).object])\n};\nHasCommand.displayName = "HasCommand";\n/* harmony default export */ const Commander_HasCommand = (HasCommand);\n;\nHasCommand.__docgenInfo = {\n  "description": "",\n  "methods": [{\n    "name": "getHandlers",\n    "docblock": null,\n    "modifiers": [],\n    "params": [],\n    "returns": null\n  }, {\n    "name": "getKeyMap",\n    "docblock": null,\n    "modifiers": [],\n    "params": [],\n    "returns": null\n  }],\n  "displayName": "HasCommand",\n  "props": {\n    "children": {\n      "description": "",\n      "type": {\n        "name": "union",\n        "value": [{\n          "name": "node"\n        }, {\n          "name": "arrayOf",\n          "value": {\n            "name": "node"\n          }\n        }]\n      },\n      "required": true\n    },\n    "commands": {\n      "description": "",\n      "type": {\n        "name": "arrayOf",\n        "value": {\n          "name": "object"\n        }\n      },\n      "required": false\n    },\n    "id": {\n      "description": "",\n      "type": {\n        "name": "string"\n      },\n      "required": false\n    },\n    "isWithinScope": {\n      "description": "",\n      "type": {\n        "name": "func"\n      },\n      "required": false\n    },\n    "scope": {\n      "description": "",\n      "type": {\n        "name": "union",\n        "value": [{\n          "name": "node"\n        }, {\n          "name": "instanceOf",\n          "value": "Element"\n        }, {\n          "name": "object"\n        }]\n      },\n      "required": false\n    }\n  }\n};\n;// CONCATENATED MODULE: ./lib/HotKeys/stories/CommandList.js\n\n\n\n\n\n/* harmony default export */ const stories_CommandList = (() => {\n  const [saveEnabled, updateSaveEnabled] = (0,react.useState)(false);\n  const saveHandler = e => {\n    e?.preventDefault(); // eslint-disable-line\n    if (saveEnabled) {\n      alert(\'data saved!\'); // eslint-disable-line\n      updateSaveEnabled(false);\n    }\n  };\n  const formChange = () => {\n    updateSaveEnabled(true);\n  };\n  const handlers = [{\n    name: \'save\',\n    handler: saveHandler\n  }];\n  return /*#__PURE__*/(0,jsx_runtime.jsx)(Commander_CommandList, {\n    commands: defaultKeyboardShortcuts,\n    children: /*#__PURE__*/(0,jsx_runtime.jsx)(Commander_HasCommand, {\n      commands: handlers,\n      children: /*#__PURE__*/(0,jsx_runtime.jsxs)("fieldset", {\n        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("legend", {\n          children: "Form Hotkeys"\n        }), /*#__PURE__*/(0,jsx_runtime.jsx)("p", {\n          children: "Ctrl + s is the save key when the form elements are focused..."\n        }), /*#__PURE__*/(0,jsx_runtime.jsx)(TextField/* default */.A, {\n          onChange: formChange,\n          label: "Command field"\n        }), /*#__PURE__*/(0,jsx_runtime.jsx)(Button/* default */.A, {\n          disabled: !saveEnabled,\n          onClick: saveHandler,\n          children: "Save"\n        })]\n      })\n    })\n  });\n});\n;// CONCATENATED MODULE: ./lib/HotKeys/stories/HotKeys.stories.js\n\n\n\n\n/* harmony default export */ const HotKeys_stories = ({\n  title: \'HotKeys\'\n});\nconst _BasicUsage = () => /*#__PURE__*/(0,jsx_runtime.jsx)(stories_BasicUsage, {});\n_BasicUsage.displayName = "_BasicUsage";\nconst HotKeys_stories_CommandList = () => /*#__PURE__*/(0,jsx_runtime.jsx)(stories_CommandList, {});\nHotKeys_stories_CommandList.displayName = "CommandList";\nHotKeys_stories_CommandList.storyName = \'CommandList\';\n_BasicUsage.parameters = {\n  ..._BasicUsage.parameters,\n  docs: {\n    ..._BasicUsage.parameters?.docs,\n    source: {\n      originalSource: "() => <BasicUsage />",\n      ..._BasicUsage.parameters?.docs?.source\n    }\n  }\n};\nHotKeys_stories_CommandList.parameters = {\n  ...HotKeys_stories_CommandList.parameters,\n  docs: {\n    ...HotKeys_stories_CommandList.parameters?.docs,\n    source: {\n      originalSource: "() => <CommandListUsage />",\n      ...HotKeys_stories_CommandList.parameters?.docs?.source\n    }\n  }\n};;const __namedExportsOrder = ["_BasicUsage","CommandList"];//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvSG90S2V5cy9zdG9yaWVzL0hvdEtleXMuc3Rvcmllcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ3ZJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUM3R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNuSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0Bmb2xpby9zdHJpcGVzLWNvbXBvbmVudHMvLi9saWIvSG90S2V5cy9zdG9yaWVzL0Jhc2ljVXNhZ2UuanM/MTljZSIsIndlYnBhY2s6Ly9AZm9saW8vc3RyaXBlcy1jb21wb25lbnRzLy4vbGliL0NvbW1hbmRlci9Db21tYW5kTGlzdC5qcz9iZjA3Iiwid2VicGFjazovL0Bmb2xpby9zdHJpcGVzLWNvbXBvbmVudHMvLi9saWIvQ29tbWFuZGVyL2tleWJvYXJkU2hvcnRjdXRzLmpzPzNhYWUiLCJ3ZWJwYWNrOi8vQGZvbGlvL3N0cmlwZXMtY29tcG9uZW50cy8uL2xpYi9Db21tYW5kZXIvSGFzQ29tbWFuZC5qcz9iOWFmIiwid2VicGFjazovL0Bmb2xpby9zdHJpcGVzLWNvbXBvbmVudHMvLi9saWIvSG90S2V5cy9zdG9yaWVzL0NvbW1hbmRMaXN0LmpzPzQxMzkiLCJ3ZWJwYWNrOi8vQGZvbGlvL3N0cmlwZXMtY29tcG9uZW50cy8uL2xpYi9Ib3RLZXlzL3N0b3JpZXMvSG90S2V5cy5zdG9yaWVzLmpzPzM0NDQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBIb3RLZXlzIC0+IEJhc2ljIHVzYWdlXG4gKi9cblxuaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgYWN0aW9uIH0gZnJvbSAnQHN0b3J5Ym9vay9hZGRvbi1hY3Rpb25zJztcbmltcG9ydCBUZXh0RmllbGQgZnJvbSAnLi4vLi4vVGV4dEZpZWxkJztcbmltcG9ydCBCdXR0b24gZnJvbSAnLi4vLi4vQnV0dG9uJztcbmltcG9ydCBNdWx0aUNvbHVtbkxpc3QgZnJvbSAnLi4vLi4vTXVsdGlDb2x1bW5MaXN0JztcbmltcG9ydCB7IEhvdEtleXMgfSBmcm9tICcuLic7XG5pbXBvcnQgeyBqc3ggYXMgX2pzeCwganN4cyBhcyBfanN4cyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuY29uc3Qgb3V0ZXJPdXRlckVudGVyID0gYWN0aW9uKCdvdXRlcl9vdXRlcl9lbnRlcicpO1xuY29uc3Qgb3V0ZXJJbm5lckVudGVyID0gYWN0aW9uKCdvdXRlcl9pbm5lcl9lbnRlcicpO1xuY29uc3QgaW5uZXJPdXRlckVudGVyID0gYWN0aW9uKCdpbm5lcl9vdXRlcl9lbnRlcicpO1xuY29uc3QgaW5uZXJJbm5lckVudGVyID0gYWN0aW9uKCdpbm5lcl9pbm5lcl9lbnRlcicpO1xuY29uc3QgdGFiT3V0ZXJIYW5kbGVyID0gYWN0aW9uKCd0YWJPdXRlcicpO1xuY29uc3QgdGFiSW5uZXJIYW5kbGVyID0gYWN0aW9uKCd0YWJJbm5lcicpO1xuY29uc3QgYWx0T3V0ZXJIYW5kbGVyID0gYWN0aW9uKCdhbHRPdXRlcicpO1xuY29uc3QgYWx0SW5uZXJIYW5kbGVyID0gYWN0aW9uKCdhbHRJbm5lcicpO1xuY29uc3Qgb3V0ZXJEb3duSGFuZGxlciA9IGFjdGlvbignZG93bkhhbmRsZXInKTtcbmNvbnN0IG91dGVyS2V5TWFwID0ge1xuICAnRU5URVJfT1VURVInOiAnZW50ZXInLFxuICAnVEFCJzogJ3RhYidcbn07XG5jb25zdCBpbm5lcktleU1hcCA9IHtcbiAgJ0VOVEVSX0lOTkVSJzogJ2VudGVyJyxcbiAgJ0FMVCc6ICdhbHQnXG59O1xuY29uc3Qgb3V0ZXJIYW5kbGVycyA9IHtcbiAgJ0VOVEVSX09VVEVSJzogb3V0ZXJPdXRlckVudGVyLFxuICAnVEFCJzogdGFiT3V0ZXJIYW5kbGVyLFxuICAnRU5URVJfSU5ORVInOiBvdXRlcklubmVyRW50ZXIsXG4gICdBTFQnOiBhbHRPdXRlckhhbmRsZXJcbn07XG5jb25zdCBpbm5lckhhbmRsZXJzID0ge1xuICAnRU5URVJfT1VURVInOiBpbm5lck91dGVyRW50ZXIsXG4gICdUQUInOiB0YWJJbm5lckhhbmRsZXIsXG4gICdFTlRFUl9JTk5FUic6IGlubmVySW5uZXJFbnRlcixcbiAgJ0FMVCc6IGFsdElubmVySGFuZGxlclxufTtcbmNvbnN0IGFsdGVybmF0aXZlT3V0ZXJLZXkgPSB7XG4gICdUQUInOiAnZG93bidcbn07XG5jb25zdCBhbHRlcm5hdGl2ZU91dGVySGFuZGxlciA9IHtcbiAgJ1RBQic6IG91dGVyRG93bkhhbmRsZXJcbn07XG5jb25zdCBob3RrZXlEYXRhID0gW3tcbiAgSG90S2V5OiAnYWx0JyxcbiAgb3V0ZXJGaWVsZDogJ25vdCBtYXBwZWQnLFxuICBpbm5lckZpZWxkOiAnYWx0SW5uZXInXG59LCB7XG4gIEhvdEtleTogJ2VudGVyJyxcbiAgb3V0ZXJGaWVsZDogJ291dGVyX291dGVyX2VudGVyJyxcbiAgaW5uZXJGaWVsZDogJ2lubmVyX2lubmVyX2VudGVyJ1xufSwge1xuICBIb3RLZXk6ICd0YWInLFxuICBvdXRlckZpZWxkOiAndGFiT3V0ZXInLFxuICBpbm5lckZpZWxkOiAndGFiSW5uZXInXG59XTtcbmNvbnN0IEJhc2ljVXNhZ2UgPSAoKSA9PiB7XG4gIGNvbnN0IFt2YWx1ZSwgc2V0VmFsdWVdID0gdXNlU3RhdGUoJ2ZpbGwnKTtcbiAgY29uc3QgW291dGVySCwgc2V0T3V0ZXJIXSA9IHVzZVN0YXRlKG91dGVySGFuZGxlcnMpO1xuICBjb25zdCBbb3V0ZXJLLCBzZXRPdXRlcktdID0gdXNlU3RhdGUob3V0ZXJLZXlNYXApO1xuICBjb25zdCBjaGFuZ2VLZXkgPSAoKSA9PiB7XG4gICAgc2V0T3V0ZXJLKGN1cnJlbnQgPT4ge1xuICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGN1cnJlbnQsIGFsdGVybmF0aXZlT3V0ZXJLZXkpO1xuICAgIH0pO1xuICB9O1xuICBjb25zdCBjaGFuZ2VIYW5kbGVyID0gKCkgPT4ge1xuICAgIHNldE91dGVySChjdXJyZW50ID0+IHtcbiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBjdXJyZW50LCBhbHRlcm5hdGl2ZU91dGVySGFuZGxlcik7XG4gICAgfSk7XG4gIH07XG5cbiAgLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqL1xuICByZXR1cm4gLyojX19QVVJFX18qL19qc3hzKFwiZGl2XCIsIHtcbiAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9fanN4KFwiaDJcIiwge1xuICAgICAgY2hpbGRyZW46IFwiSG90S2V5c1wiXG4gICAgfSksIC8qI19fUFVSRV9fKi9fanN4KFwicFwiLCB7XG4gICAgICBjaGlsZHJlbjogXCJUaGlzIHRhYmxlIGRlc2NyaWJlcyB0aGUgbWFwcGluZyBvZiB0aGUga2V5Ym9hcmQga2V5cyBmb3IgdGhlIGJlbG93IGV4YW1wbGUuIEluIGNvZGUsIHRoZSB0YWIga2V5IGlzIG1hcHBlZCBhdCB0aGUgb3V0c2lkZSBsZXZlbCwgYW5kIHRoZSBpbm5lciBmaWVsZCBhcHBsaWVzIGl0cyBvd24gaGFuZGxlci4gXFxcIkFMVFxcXCIgaXMgb25seSBtYXBwZWQgdG8gdGhlIGlubmVyIGZpZWxkLiBZb3UgY2FuIHNlZSBvdXRwdXQgZnJvbSBwcmVzc2luZyBob3Qga2V5cyBpbiB0aGUgXFxcIkFjdGlvbiBMb2dnZXJcXFwiIHBhbmVsIGJlbG93LlwiXG4gICAgfSksIC8qI19fUFVSRV9fKi9fanN4KE11bHRpQ29sdW1uTGlzdCwge1xuICAgICAgY29udGVudERhdGE6IGhvdGtleURhdGFcbiAgICB9KSwgLyojX19QVVJFX18qL19qc3goXCJwXCIsIHtcbiAgICAgIGNoaWxkcmVuOiBcIlRoZSBzY29wZSBvZiBhIGhvdEtleSdzIGFmZmVjdCBpbiB0aGUgVUkgaXMgZGljdGF0ZWQgYnkgZm9jdXMuIFdoZW4geW91ciBmb2N1cyBpbmRpY2F0b3IgKGJsdWUgb3V0bGluZSBpbiBtb3N0IGJyb3dzZXJzKSBpcyB3aXRoaW4gdGhlIGJsdWUgKG91dGVyKSBvciBvcmFuZ2UgKGlubmVyKSBib3JkZXJzLCB0aGUgc2NvcGUgaXMgdG8gdGhlIGNvcnJlc3BvbmRpbmcgSG90S2V5cyBpbnN0YW5jZS5cIlxuICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeChIb3RLZXlzLCB7XG4gICAgICBrZXlNYXA6IG91dGVySyxcbiAgICAgIGhhbmRsZXJzOiBvdXRlckgsXG4gICAgICBpZDogXCJvdXRlclwiLFxuICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9fanN4cyhcImRpdlwiLCB7XG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgYm9yZGVyOiAnMXB4IGRhc2hlZCBibHVlJyxcbiAgICAgICAgICBwYWRkaW5nOiAnMTBweCdcbiAgICAgICAgfSxcbiAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovX2pzeChUZXh0RmllbGQsIHtcbiAgICAgICAgICBsYWJlbDogXCJPdXRlciBmaWVsZFwiLFxuICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICBvbkNoYW5nZTogZSA9PiB7XG4gICAgICAgICAgICBzZXRWYWx1ZShlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KSwgLyojX19QVVJFX18qL19qc3goSG90S2V5cywge1xuICAgICAgICAgIGtleU1hcDogaW5uZXJLZXlNYXAsXG4gICAgICAgICAgaGFuZGxlcnM6IGlubmVySGFuZGxlcnMsXG4gICAgICAgICAgaWQ6IFwiaW5uZXJcIixcbiAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL19qc3goXCJkaXZcIiwge1xuICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgYm9yZGVyOiAnMXB4IGRhc2hlZCBvcmFuZ2UnLFxuICAgICAgICAgICAgICBwYWRkaW5nOiAnMTBweCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL19qc3goVGV4dEZpZWxkLCB7XG4gICAgICAgICAgICAgIGxhYmVsOiBcIklubmVyIGZpZWxkXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSlcbiAgICAgICAgfSldXG4gICAgICB9KVxuICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeChcInBcIiwge1xuICAgICAgY2hpbGRyZW46IFwiVGhlIGJ1dHRvbnMgYmVsb3cgd2lsbCBtb2RpZnkgdGhlIG1hcHBlZCBrZXlzIG9mIHRoZSBvdXRlciBmaWVsZC4gVGhlIFxcXCJDaGFuZ2UgS2V5XFxcIiBidXR0b24gd2lsbCBtYXAgdGhlIFxcXCJUYWJcXFwiIGhhbmRsZXIgdG8gdGhlIFxcXCJkb3duXFxcIiBhcnJvdy4gVGhlIFxcXCJDaGFuZ2UgSGFuZGxlclxcXCIgYnV0dG9uIHdpbGwgbWFwIGEgXFxcImRvd25IYW5kbGVyXFxcIiB0byB0aGUgXFxcIlRhYlxcXCIgbWFwcGluZy5cIlxuICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeChCdXR0b24sIHtcbiAgICAgIHR5cGU6IFwiYnV0dG9uXCIsXG4gICAgICBvbkNsaWNrOiBjaGFuZ2VLZXksXG4gICAgICBjaGlsZHJlbjogXCJDaGFuZ2UgVGFiIGtleSBtYXBwaW5nIHRvIERvd24ga2V5XCJcbiAgICB9KSwgLyojX19QVVJFX18qL19qc3goQnV0dG9uLCB7XG4gICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgb25DbGljazogY2hhbmdlSGFuZGxlcixcbiAgICAgIGNoaWxkcmVuOiBcIkNoYW5nZSBUYWIgKG9yIERvd24/KSBrZXkgaGFuZGxlciB0byBhIERvd24ga2V5IGhhbmRsZXJcIlxuICAgIH0pXVxuICB9KTtcbn07XG5CYXNpY1VzYWdlLmRpc3BsYXlOYW1lID0gXCJCYXNpY1VzYWdlXCI7XG4vKiBlc2xpbnQtZW5hYmxlIG1heC1sZW4gKi9cbmV4cG9ydCBkZWZhdWx0IEJhc2ljVXNhZ2U7XG47XG5CYXNpY1VzYWdlLl9fZG9jZ2VuSW5mbyA9IHtcbiAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICBcIm1ldGhvZHNcIjogW10sXG4gIFwiZGlzcGxheU5hbWVcIjogXCJCYXNpY1VzYWdlXCJcbn07IiwiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgeyBIb3RLZXlzIH0gZnJvbSAnLi4vSG90S2V5cyc7XG5pbXBvcnQgeyBqc3ggYXMgX2pzeCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuY2xhc3MgQ29tbWFuZExpc3QgZXh0ZW5kcyBDb21wb25lbnQge1xuICBnZW5lcmF0ZUhvdEtleXNQcm9wcygpIHtcbiAgICBjb25zdCB7XG4gICAgICBjb21tYW5kc1xuICAgIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IGtleU1hcCA9IHt9O1xuICAgIGNvbnN0IGhhbmRsZXJzID0ge307XG4gICAgY29tbWFuZHMuZm9yRWFjaChjID0+IHtcbiAgICAgIGtleU1hcFtjLm5hbWVdID0gYy5zaG9ydGN1dCB8fCAnJztcbiAgICAgIGlmIChjLmhhbmRsZXIpIHtcbiAgICAgICAgaGFuZGxlcnNbYy5uYW1lXSA9IGMuaGFuZGxlcjtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAga2V5TWFwLFxuICAgICAgaGFuZGxlcnNcbiAgICB9O1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7XG4gICAgICBjaGlsZHJlbixcbiAgICAgIGlkXG4gICAgfSA9IHRoaXMucHJvcHM7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9fanN4KEhvdEtleXMsIHtcbiAgICAgIGlkOiBpZCxcbiAgICAgIC4uLnRoaXMuZ2VuZXJhdGVIb3RLZXlzUHJvcHMoKSxcbiAgICAgIG5vV3JhcHBlcjogdHJ1ZSxcbiAgICAgIGNoaWxkcmVuOiBjaGlsZHJlblxuICAgIH0pO1xuICB9XG59XG5Db21tYW5kTGlzdC5wcm9wVHlwZXMgPSB7XG4gIGNoaWxkcmVuOiBQcm9wVHlwZXMubm9kZSxcbiAgY29tbWFuZHM6IFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5zaGFwZSh7XG4gICAgaGFuZGxlcjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgbGFiZWw6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5zdHJpbmcsIFByb3BUeXBlcy5mdW5jLCBQcm9wVHlwZXMubm9kZV0pLFxuICAgIG5hbWU6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICBzaG9ydGN1dDogUHJvcFR5cGVzLnN0cmluZ1xuICB9KSkuaXNSZXF1aXJlZCxcbiAgaWQ6IFByb3BUeXBlcy5zdHJpbmdcbn07XG5Db21tYW5kTGlzdC5kaXNwbGF5TmFtZSA9IFwiQ29tbWFuZExpc3RcIjtcbmV4cG9ydCBkZWZhdWx0IENvbW1hbmRMaXN0O1xuO1xuQ29tbWFuZExpc3QuX19kb2NnZW5JbmZvID0ge1xuICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gIFwibWV0aG9kc1wiOiBbe1xuICAgIFwibmFtZVwiOiBcImdlbmVyYXRlSG90S2V5c1Byb3BzXCIsXG4gICAgXCJkb2NibG9ja1wiOiBudWxsLFxuICAgIFwibW9kaWZpZXJzXCI6IFtdLFxuICAgIFwicGFyYW1zXCI6IFtdLFxuICAgIFwicmV0dXJuc1wiOiBudWxsXG4gIH1dLFxuICBcImRpc3BsYXlOYW1lXCI6IFwiQ29tbWFuZExpc3RcIixcbiAgXCJwcm9wc1wiOiB7XG4gICAgXCJjaGlsZHJlblwiOiB7XG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICAgICBcInR5cGVcIjoge1xuICAgICAgICBcIm5hbWVcIjogXCJub2RlXCJcbiAgICAgIH0sXG4gICAgICBcInJlcXVpcmVkXCI6IGZhbHNlXG4gICAgfSxcbiAgICBcImNvbW1hbmRzXCI6IHtcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICAgIFwidHlwZVwiOiB7XG4gICAgICAgIFwibmFtZVwiOiBcImFycmF5T2ZcIixcbiAgICAgICAgXCJ2YWx1ZVwiOiB7XG4gICAgICAgICAgXCJuYW1lXCI6IFwic2hhcGVcIixcbiAgICAgICAgICBcInZhbHVlXCI6IHtcbiAgICAgICAgICAgIFwiaGFuZGxlclwiOiB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcImZ1bmNcIixcbiAgICAgICAgICAgICAgXCJyZXF1aXJlZFwiOiBmYWxzZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwibGFiZWxcIjoge1xuICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ1bmlvblwiLFxuICAgICAgICAgICAgICBcInZhbHVlXCI6IFt7XG4gICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcImZ1bmNcIlxuICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwibm9kZVwiXG4gICAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgICBcInJlcXVpcmVkXCI6IGZhbHNlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJuYW1lXCI6IHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgIFwicmVxdWlyZWRcIjogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwic2hvcnRjdXRcIjoge1xuICAgICAgICAgICAgICBcIm5hbWVcIjogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgXCJyZXF1aXJlZFwiOiBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIFwicmVxdWlyZWRcIjogdHJ1ZVxuICAgIH0sXG4gICAgXCJpZFwiOiB7XG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICAgICBcInR5cGVcIjoge1xuICAgICAgICBcIm5hbWVcIjogXCJzdHJpbmdcIlxuICAgICAgfSxcbiAgICAgIFwicmVxdWlyZWRcIjogZmFsc2VcbiAgICB9XG4gIH1cbn07IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEZvcm1hdHRlZE1lc3NhZ2UgfSBmcm9tICdyZWFjdC1pbnRsJztcbmltcG9ydCBtYXBWYWx1ZXMgZnJvbSAnbG9kYXNoL21hcFZhbHVlcyc7XG5pbXBvcnQgeyBqc3ggYXMgX2pzeCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuY29uc3QgZXhwYW5kQWxsU2VjdGlvbnMgPSAoZSwgYWNjb3JkaW9uU3RhdHVzUmVmKSA9PiB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3Qge1xuICAgIHNldFN0YXR1c1xuICB9ID0gYWNjb3JkaW9uU3RhdHVzUmVmLmN1cnJlbnQ7XG4gIHNldFN0YXR1cyhjdXIgPT4gKHtcbiAgICAuLi5jdXIsXG4gICAgc3RhdHVzOiBtYXBWYWx1ZXMoY3VyLnN0YXR1cywgKCkgPT4gdHJ1ZSlcbiAgfSkpO1xufTtcbmNvbnN0IGNvbGxhcHNlQWxsU2VjdGlvbnMgPSAoZSwgYWNjb3JkaW9uU3RhdHVzUmVmKSA9PiB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3Qge1xuICAgIHNldFN0YXR1c1xuICB9ID0gYWNjb3JkaW9uU3RhdHVzUmVmLmN1cnJlbnQ7XG4gIHNldFN0YXR1cyhjdXIgPT4gKHtcbiAgICAuLi5jdXIsXG4gICAgc3RhdHVzOiBtYXBWYWx1ZXMoY3VyLnN0YXR1cywgKCkgPT4gZmFsc2UpXG4gIH0pKTtcbn07XG5jb25zdCBjaGVja1Njb3BlID0gKCkgPT4ge1xuICByZXR1cm4gZG9jdW1lbnQuYm9keS5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KTtcbn07XG5jb25zdCBkZWZhdWx0S2V5Ym9hcmRTaG9ydGN1dHMgPSBbe1xuICBsYWJlbDogLyojX19QVVJFX18qL19qc3goRm9ybWF0dGVkTWVzc2FnZSwge1xuICAgIGlkOiBcInN0cmlwZXMtY29tcG9uZW50cy5zaG9ydGN1dC5jcmVhdGVSZWNvcmRcIlxuICB9KSxcbiAgbmFtZTogJ25ldycsXG4gIHNob3J0Y3V0OiAnYWx0ICsgbidcbn0sIHtcbiAgbGFiZWw6IC8qI19fUFVSRV9fKi9fanN4KEZvcm1hdHRlZE1lc3NhZ2UsIHtcbiAgICBpZDogXCJzdHJpcGVzLWNvbXBvbmVudHMuc2hvcnRjdXQuZWRpdFJlY29yZFwiXG4gIH0pLFxuICBuYW1lOiAnZWRpdCcsXG4gIHNob3J0Y3V0OiAnbW9kICsgYWx0ICsgZSdcbn0sIHtcbiAgbGFiZWw6IC8qI19fUFVSRV9fKi9fanN4KEZvcm1hdHRlZE1lc3NhZ2UsIHtcbiAgICBpZDogXCJzdHJpcGVzLWNvbXBvbmVudHMuc2hvcnRjdXQuc2F2ZVJlY29yZFwiXG4gIH0pLFxuICBuYW1lOiAnc2F2ZScsXG4gIHNob3J0Y3V0OiAnbW9kICsgcydcbn0sIHtcbiAgbGFiZWw6IC8qI19fUFVSRV9fKi9fanN4KEZvcm1hdHRlZE1lc3NhZ2UsIHtcbiAgICBpZDogXCJzdHJpcGVzLWNvbXBvbmVudHMuc2hvcnRjdXQuZHVwbGljYXRlUmVjb3JkXCJcbiAgfSksXG4gIG5hbWU6ICdkdXBsaWNhdGVSZWNvcmQnLFxuICBzaG9ydGN1dDogJ2FsdCArIGMnXG59LCB7XG4gIGxhYmVsOiAvKiNfX1BVUkVfXyovX2pzeChGb3JtYXR0ZWRNZXNzYWdlLCB7XG4gICAgaWQ6IFwic3RyaXBlcy1jb21wb25lbnRzLnNob3J0Y3V0LmV4cGFuZEFsbFwiXG4gIH0pLFxuICBuYW1lOiAnZXhwYW5kQWxsU2VjdGlvbnMnLFxuICBzaG9ydGN1dDogJ21vZCArIGFsdCArIGInXG59LCB7XG4gIGxhYmVsOiAvKiNfX1BVUkVfXyovX2pzeChGb3JtYXR0ZWRNZXNzYWdlLCB7XG4gICAgaWQ6IFwic3RyaXBlcy1jb21wb25lbnRzLnNob3J0Y3V0LmNvbGxhcHNlQWxsXCJcbiAgfSksXG4gIG5hbWU6ICdjb2xsYXBzZUFsbFNlY3Rpb25zJyxcbiAgc2hvcnRjdXQ6ICdtb2QgKyBhbHQgKyBnJ1xufSwge1xuICBsYWJlbDogLyojX19QVVJFX18qL19qc3goRm9ybWF0dGVkTWVzc2FnZSwge1xuICAgIGlkOiBcInN0cmlwZXMtY29tcG9uZW50cy5zaG9ydGN1dC5leHBhbmRPckNvbGxhcHNlXCJcbiAgfSksXG4gIG5hbWU6ICdleHBhbmRPckNvbGxhcHNlQWNjb3JkaW9uJyxcbiAgc2hvcnRjdXQ6ICdzcGFjZWJhcidcbn0sIHtcbiAgbGFiZWw6IC8qI19fUFVSRV9fKi9fanN4KEZvcm1hdHRlZE1lc3NhZ2UsIHtcbiAgICBpZDogXCJzdHJpcGVzLWNvbXBvbmVudHMuc2hvcnRjdXQuZ29Ub1NlYXJjaEZpbHRlclwiXG4gIH0pLFxuICBuYW1lOiAnc2VhcmNoJyxcbiAgc2hvcnRjdXQ6ICdtb2QgKyBhbHQgKyBoJ1xufSwge1xuICBsYWJlbDogLyojX19QVVJFX18qL19qc3goRm9ybWF0dGVkTWVzc2FnZSwge1xuICAgIGlkOiBcInN0cmlwZXMtY29tcG9uZW50cy5zaG9ydGN1dC5vcGVuU2hvcnRjdXRNb2RhbFwiXG4gIH0pLFxuICBuYW1lOiAnb3BlblNob3J0Y3V0TW9kYWwnLFxuICBzaG9ydGN1dDogJ21vZCArIGFsdCArIGsnXG59XTtcblxuLy8gbGlzdCBvZiBkZWZhdWx0IGtleWJvYXJkIHNob3J0Y3V0IG5hbWVzIFsnbmV3JywgJ2VkaXQnLCAnc2F2ZSddXG5jb25zdCBrZXlib2FyZFNob3J0Y3V0TmFtZXMgPSBkZWZhdWx0S2V5Ym9hcmRTaG9ydGN1dHMubWFwKF9yZWYgPT4ge1xuICBsZXQge1xuICAgIG5hbWVcbiAgfSA9IF9yZWY7XG4gIHJldHVybiBuYW1lO1xufSk7XG5cbi8qIGZ1bmN0aW9uIHRvIGltcG9ydCBzcGVjaWZpYyBzaG9ydGN1dHMgcmVsZXZhbnQgdG8gdGhlIGFwcC4gVGFrZXMgaW4gYW4gYXJyYXkgd2l0aFxuICAgc2hvcnRjdXQgbmFtZXMgWyduZXcnLCAnc2F2ZScsICdkdXBsaWNhdGVSZWNvcmQnXSBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiByZXF1ZXN0ZWRcbiAgIHNob3J0Y3V0cyBlbnRyaWVzIGZyb20gdGhlIGRlZmF1bHRLZXlib2FyZFNob3J0Y3V0cyBhcnJheSBwcnNlcnZpbmcgdGhlIG9yZGVyIG9mIGVudHJpZXMgKi9cbmNvbnN0IGltcG9ydFNob3J0Y3V0cyA9IGZ1bmN0aW9uICgpIHtcbiAgbGV0IHNob3J0Y3V0TmFtZXNBcnJheSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogW107XG4gIGNvbnN0IGZpbHRlcmVkU2hvcnRjdXRzQXJyYXkgPSBbXTsgLy8gYXJyYXkgdGhhdCBjb250YWlucyBzcGVjaWZpYyByZXF1ZXN0ZWQgc2hvcnRjdXRzIGZyb20gdGhlIGFwcFxuXG4gIGZvciAoY29uc3Qgc2hvcnRjdXQgb2YgZGVmYXVsdEtleWJvYXJkU2hvcnRjdXRzKSB7XG4gICAgaWYgKHNob3J0Y3V0TmFtZXNBcnJheS5maW5kKHNob3J0Y3V0TmFtZSA9PiBzaG9ydGN1dE5hbWU/LnRvTG93ZXJDYXNlKCkgPT09IHNob3J0Y3V0Py5uYW1lPy50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgZmlsdGVyZWRTaG9ydGN1dHNBcnJheS5wdXNoKHNob3J0Y3V0KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZpbHRlcmVkU2hvcnRjdXRzQXJyYXk7XG59O1xuXG4vKiBmdW5jdGlvbiB0aGF0IG92ZXJyaWRlcyB0aGUgbGFiZWxzIG9mIHRoZSBkZWZhdWx0IHNob3J0Y3V0cyB0byBiZSBkaXNwbGF5ZWRcbiAgIEVnOiBUaGUgJ25ldycgZGVmYXVsdCBzaG9ydGN1dCByZW5kZXJzIGl0cyBsYWJlbCBhcyBgTmV3YC4gSWYgdGhlIGFwcCB3YW50cyBpdCBkaXNwbGF5ZWQgYXMgYE5ldyByZXNvdXJjZWAgaW5zdGVhZCxcbiAgIHlvdSBjb3VsZCBjYWxsIHRoZSByZW5hbWVTaG9ydGN1dExhYmVscyBmdW5jdGlvbiBhc1xuICAgYHJlbmFtZVNob3J0Y3V0TGFiZWxzKHNob3J0Y3V0c0FycmF5LCBbeyAnc2hvcnRjdXQnOiAnbmV3JywgJ2xhYmVsJzogJzxGb3JtYXRlZE1lc3NhZ2UgaWQ9XCJ1aS1hcHAubmV3UmVzb3VyY2UnfV1cbiAgIE5vdGU6IHNob3J0Y3V0c0FycmF5IGNvbnRhaW5zIHRoZSBsaXN0IG9mIHNob3J0Y3V0cyB3aXRoIGxhYmVscyB5b3Ugd2FudCB0byBiZSBtb2RpZmllZC4gZWc6IGRlZmF1bHRLZXlib2FyZFNob3J0Y3V0c1xuKi9cbmNvbnN0IHJlbmFtZVNob3J0Y3V0TGFiZWxzID0gZnVuY3Rpb24gKCkge1xuICBsZXQgc2hvcnRjdXRzQXJyYXkgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdO1xuICBsZXQgbmV3TGFiZWxzQXJyYXkgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFtdO1xuICBpZiAobmV3TGFiZWxzQXJyYXkubGVuZ3RoID09PSAwKSByZXR1cm4gc2hvcnRjdXRzQXJyYXk7XG4gIHJldHVybiBzaG9ydGN1dHNBcnJheS5tYXAoc2hvcnRjdXRPYmogPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIG5hbWVcbiAgICB9ID0gc2hvcnRjdXRPYmo7XG4gICAgY29uc3QgZW50cnlXaXRoU2hvcnRjdXQgPSBuZXdMYWJlbHNBcnJheS5maW5kKF9yZWYyID0+IHtcbiAgICAgIGxldCB7XG4gICAgICAgIHNob3J0Y3V0XG4gICAgICB9ID0gX3JlZjI7XG4gICAgICByZXR1cm4gc2hvcnRjdXQ/LnRvTG93ZXJDYXNlKCkgPT09IG5hbWU/LnRvTG93ZXJDYXNlKCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGVudHJ5V2l0aFNob3J0Y3V0ID8ge1xuICAgICAgLi4uc2hvcnRjdXRPYmosXG4gICAgICBsYWJlbDogZW50cnlXaXRoU2hvcnRjdXQubGFiZWxcbiAgICB9IDogc2hvcnRjdXRPYmo7XG4gIH0pO1xufTtcbmV4cG9ydCB7IGV4cGFuZEFsbFNlY3Rpb25zLCBjb2xsYXBzZUFsbFNlY3Rpb25zLCBjaGVja1Njb3BlLCBkZWZhdWx0S2V5Ym9hcmRTaG9ydGN1dHMsIGtleWJvYXJkU2hvcnRjdXROYW1lcywgaW1wb3J0U2hvcnRjdXRzLCByZW5hbWVTaG9ydGN1dExhYmVscyB9OyIsIi8qXG4qIEhhc0NvbW1hbmQgYXBwbGllcyBhIGtleWJvYXJkIHNob3J0Y3V0IHRvIGEgd3JhcHBlZCBzZWN0aW9uIG9mIHRoZSBVSVxuKiBHaXZlbiBhICduYW1lJyBwcm9wLCBpdCBhc3NpZ25zIGEgaGFuZGxlciBmdW5jdGlvbiB0byB0aGUgYXNzb2NpYXRlZFxuKiBTaG9ydGN1dCBmcm9tIGEgcGFyZW50ICdDb21tYW5kTGlzdCdcbiovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IGlzRXF1YWwgZnJvbSAnbG9kYXNoL2lzRXF1YWwnO1xuaW1wb3J0IHsgSG90S2V5cyB9IGZyb20gJy4uL0hvdEtleXMnO1xuaW1wb3J0IHsganN4IGFzIF9qc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmNsYXNzIEhhc0NvbW1hbmQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLmdldEhhbmRsZXJzID0gdGhpcy5nZXRIYW5kbGVycy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZ2V0S2V5TWFwID0gdGhpcy5nZXRLZXlNYXAuYmluZCh0aGlzKTtcbiAgICB0aGlzLmhhbmRsZXJzID0gdGhpcy5nZXRIYW5kbGVycygpO1xuICAgIHRoaXMua2V5TWFwID0gdGhpcy5nZXRLZXlNYXAoKTtcbiAgfVxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzKSB7XG4gICAgY29uc3Qge1xuICAgICAgY29tbWFuZHNcbiAgICB9ID0gdGhpcy5wcm9wcztcbiAgICBpZiAoIWlzRXF1YWwoY29tbWFuZHMsIHByZXZQcm9wcy5jb21tYW5kcykpIHtcbiAgICAgIHRoaXMuaGFuZGxlcnMgPSB0aGlzLmdldEhhbmRsZXJzKCk7XG4gICAgICB0aGlzLmtleU1hcCA9IHRoaXMuZ2V0S2V5TWFwKCk7XG4gICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XG4gICAgfVxuICB9XG4gIGdldEhhbmRsZXJzKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGNvbW1hbmRzXG4gICAgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgaGFuZGxlcnMgPSB7fTtcbiAgICBjb21tYW5kcy5mb3JFYWNoKGMgPT4ge1xuICAgICAgaWYgKGMuaGFuZGxlcikge1xuICAgICAgICBoYW5kbGVyc1tjLm5hbWVdID0gYy5oYW5kbGVyO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBoYW5kbGVycztcbiAgfVxuICBnZXRLZXlNYXAoKSB7XG4gICAgY29uc3Qge1xuICAgICAgY29tbWFuZHNcbiAgICB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCBrZXlNYXAgPSB7fTtcbiAgICBjb21tYW5kcy5mb3JFYWNoKGMgPT4ge1xuICAgICAgaWYgKGMuc2hvcnRjdXQpIHtcbiAgICAgICAga2V5TWFwW2MubmFtZV0gPSBjLnNob3J0Y3V0O1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChPYmplY3Qua2V5cyhrZXlNYXApLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBrZXlNYXA7XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGNoaWxkcmVuLFxuICAgICAgaWQsXG4gICAgICBpc1dpdGhpblNjb3BlLFxuICAgICAgc2NvcGVcbiAgICB9ID0gdGhpcy5wcm9wcztcbiAgICByZXR1cm4gLyojX19QVVJFX18qL19qc3goSG90S2V5cywge1xuICAgICAgaWQ6IGlkLFxuICAgICAga2V5TWFwOiB0aGlzLmtleU1hcCxcbiAgICAgIGhhbmRsZXJzOiB0aGlzLmhhbmRsZXJzLFxuICAgICAgZm9jdXNlZDogaXNXaXRoaW5TY29wZSxcbiAgICAgIGF0dGFjaDogc2NvcGUsXG4gICAgICBub1dyYXBwZXI6IHRydWUsXG4gICAgICBjaGlsZHJlbjogY2hpbGRyZW5cbiAgICB9KTtcbiAgfVxufVxuSGFzQ29tbWFuZC5wcm9wVHlwZXMgPSB7XG4gIGNoaWxkcmVuOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMubm9kZSwgUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLm5vZGUpXSkuaXNSZXF1aXJlZCxcbiAgY29tbWFuZHM6IFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5vYmplY3QpLFxuICBpZDogUHJvcFR5cGVzLnN0cmluZyxcbiAgaXNXaXRoaW5TY29wZTogUHJvcFR5cGVzLmZ1bmMsXG4gIHNjb3BlOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMubm9kZSwgUHJvcFR5cGVzLmluc3RhbmNlT2YoRWxlbWVudCksIFByb3BUeXBlcy5vYmplY3RdKVxufTtcbkhhc0NvbW1hbmQuZGlzcGxheU5hbWUgPSBcIkhhc0NvbW1hbmRcIjtcbmV4cG9ydCBkZWZhdWx0IEhhc0NvbW1hbmQ7XG47XG5IYXNDb21tYW5kLl9fZG9jZ2VuSW5mbyA9IHtcbiAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICBcIm1ldGhvZHNcIjogW3tcbiAgICBcIm5hbWVcIjogXCJnZXRIYW5kbGVyc1wiLFxuICAgIFwiZG9jYmxvY2tcIjogbnVsbCxcbiAgICBcIm1vZGlmaWVyc1wiOiBbXSxcbiAgICBcInBhcmFtc1wiOiBbXSxcbiAgICBcInJldHVybnNcIjogbnVsbFxuICB9LCB7XG4gICAgXCJuYW1lXCI6IFwiZ2V0S2V5TWFwXCIsXG4gICAgXCJkb2NibG9ja1wiOiBudWxsLFxuICAgIFwibW9kaWZpZXJzXCI6IFtdLFxuICAgIFwicGFyYW1zXCI6IFtdLFxuICAgIFwicmV0dXJuc1wiOiBudWxsXG4gIH1dLFxuICBcImRpc3BsYXlOYW1lXCI6IFwiSGFzQ29tbWFuZFwiLFxuICBcInByb3BzXCI6IHtcbiAgICBcImNoaWxkcmVuXCI6IHtcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICAgIFwidHlwZVwiOiB7XG4gICAgICAgIFwibmFtZVwiOiBcInVuaW9uXCIsXG4gICAgICAgIFwidmFsdWVcIjogW3tcbiAgICAgICAgICBcIm5hbWVcIjogXCJub2RlXCJcbiAgICAgICAgfSwge1xuICAgICAgICAgIFwibmFtZVwiOiBcImFycmF5T2ZcIixcbiAgICAgICAgICBcInZhbHVlXCI6IHtcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIm5vZGVcIlxuICAgICAgICAgIH1cbiAgICAgICAgfV1cbiAgICAgIH0sXG4gICAgICBcInJlcXVpcmVkXCI6IHRydWVcbiAgICB9LFxuICAgIFwiY29tbWFuZHNcIjoge1xuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgICAgXCJ0eXBlXCI6IHtcbiAgICAgICAgXCJuYW1lXCI6IFwiYXJyYXlPZlwiLFxuICAgICAgICBcInZhbHVlXCI6IHtcbiAgICAgICAgICBcIm5hbWVcIjogXCJvYmplY3RcIlxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgXCJyZXF1aXJlZFwiOiBmYWxzZVxuICAgIH0sXG4gICAgXCJpZFwiOiB7XG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICAgICBcInR5cGVcIjoge1xuICAgICAgICBcIm5hbWVcIjogXCJzdHJpbmdcIlxuICAgICAgfSxcbiAgICAgIFwicmVxdWlyZWRcIjogZmFsc2VcbiAgICB9LFxuICAgIFwiaXNXaXRoaW5TY29wZVwiOiB7XG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICAgICBcInR5cGVcIjoge1xuICAgICAgICBcIm5hbWVcIjogXCJmdW5jXCJcbiAgICAgIH0sXG4gICAgICBcInJlcXVpcmVkXCI6IGZhbHNlXG4gICAgfSxcbiAgICBcInNjb3BlXCI6IHtcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICAgIFwidHlwZVwiOiB7XG4gICAgICAgIFwibmFtZVwiOiBcInVuaW9uXCIsXG4gICAgICAgIFwidmFsdWVcIjogW3tcbiAgICAgICAgICBcIm5hbWVcIjogXCJub2RlXCJcbiAgICAgICAgfSwge1xuICAgICAgICAgIFwibmFtZVwiOiBcImluc3RhbmNlT2ZcIixcbiAgICAgICAgICBcInZhbHVlXCI6IFwiRWxlbWVudFwiXG4gICAgICAgIH0sIHtcbiAgICAgICAgICBcIm5hbWVcIjogXCJvYmplY3RcIlxuICAgICAgICB9XVxuICAgICAgfSxcbiAgICAgIFwicmVxdWlyZWRcIjogZmFsc2VcbiAgICB9XG4gIH1cbn07IiwiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQ29tbWFuZExpc3QsIEhhc0NvbW1hbmQsIGRlZmF1bHRLZXlib2FyZFNob3J0Y3V0cyB9IGZyb20gJy4uLy4uL0NvbW1hbmRlcic7XG5pbXBvcnQgVGV4dEZpZWxkIGZyb20gJy4uLy4uL1RleHRGaWVsZCc7XG5pbXBvcnQgQnV0dG9uIGZyb20gJy4uLy4uL0J1dHRvbic7XG5pbXBvcnQgeyBqc3ggYXMgX2pzeCwganN4cyBhcyBfanN4cyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuZXhwb3J0IGRlZmF1bHQgKCgpID0+IHtcbiAgY29uc3QgW3NhdmVFbmFibGVkLCB1cGRhdGVTYXZlRW5hYmxlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHNhdmVIYW5kbGVyID0gZSA9PiB7XG4gICAgZT8ucHJldmVudERlZmF1bHQoKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgIGlmIChzYXZlRW5hYmxlZCkge1xuICAgICAgYWxlcnQoJ2RhdGEgc2F2ZWQhJyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgIHVwZGF0ZVNhdmVFbmFibGVkKGZhbHNlKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGZvcm1DaGFuZ2UgPSAoKSA9PiB7XG4gICAgdXBkYXRlU2F2ZUVuYWJsZWQodHJ1ZSk7XG4gIH07XG4gIGNvbnN0IGhhbmRsZXJzID0gW3tcbiAgICBuYW1lOiAnc2F2ZScsXG4gICAgaGFuZGxlcjogc2F2ZUhhbmRsZXJcbiAgfV07XG4gIHJldHVybiAvKiNfX1BVUkVfXyovX2pzeChDb21tYW5kTGlzdCwge1xuICAgIGNvbW1hbmRzOiBkZWZhdWx0S2V5Ym9hcmRTaG9ydGN1dHMsXG4gICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9fanN4KEhhc0NvbW1hbmQsIHtcbiAgICAgIGNvbW1hbmRzOiBoYW5kbGVycyxcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovX2pzeHMoXCJmaWVsZHNldFwiLCB7XG4gICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL19qc3goXCJsZWdlbmRcIiwge1xuICAgICAgICAgIGNoaWxkcmVuOiBcIkZvcm0gSG90a2V5c1wiXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovX2pzeChcInBcIiwge1xuICAgICAgICAgIGNoaWxkcmVuOiBcIkN0cmwgKyBzIGlzIHRoZSBzYXZlIGtleSB3aGVuIHRoZSBmb3JtIGVsZW1lbnRzIGFyZSBmb2N1c2VkLi4uXCJcbiAgICAgICAgfSksIC8qI19fUFVSRV9fKi9fanN4KFRleHRGaWVsZCwge1xuICAgICAgICAgIG9uQ2hhbmdlOiBmb3JtQ2hhbmdlLFxuICAgICAgICAgIGxhYmVsOiBcIkNvbW1hbmQgZmllbGRcIlxuICAgICAgICB9KSwgLyojX19QVVJFX18qL19qc3goQnV0dG9uLCB7XG4gICAgICAgICAgZGlzYWJsZWQ6ICFzYXZlRW5hYmxlZCxcbiAgICAgICAgICBvbkNsaWNrOiBzYXZlSGFuZGxlcixcbiAgICAgICAgICBjaGlsZHJlbjogXCJTYXZlXCJcbiAgICAgICAgfSldXG4gICAgICB9KVxuICAgIH0pXG4gIH0pO1xufSk7IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBCYXNpY1VzYWdlIGZyb20gJy4vQmFzaWNVc2FnZSc7XG5pbXBvcnQgQ29tbWFuZExpc3RVc2FnZSBmcm9tICcuL0NvbW1hbmRMaXN0JztcbmltcG9ydCB7IGpzeCBhcyBfanN4IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5leHBvcnQgZGVmYXVsdCB7XG4gIHRpdGxlOiAnSG90S2V5cydcbn07XG5leHBvcnQgY29uc3QgX0Jhc2ljVXNhZ2UgPSAoKSA9PiAvKiNfX1BVUkVfXyovX2pzeChCYXNpY1VzYWdlLCB7fSk7XG5fQmFzaWNVc2FnZS5kaXNwbGF5TmFtZSA9IFwiX0Jhc2ljVXNhZ2VcIjtcbmV4cG9ydCBjb25zdCBDb21tYW5kTGlzdCA9ICgpID0+IC8qI19fUFVSRV9fKi9fanN4KENvbW1hbmRMaXN0VXNhZ2UsIHt9KTtcbkNvbW1hbmRMaXN0LmRpc3BsYXlOYW1lID0gXCJDb21tYW5kTGlzdFwiO1xuQ29tbWFuZExpc3Quc3RvcnlOYW1lID0gJ0NvbW1hbmRMaXN0Jztcbl9CYXNpY1VzYWdlLnBhcmFtZXRlcnMgPSB7XG4gIC4uLl9CYXNpY1VzYWdlLnBhcmFtZXRlcnMsXG4gIGRvY3M6IHtcbiAgICAuLi5fQmFzaWNVc2FnZS5wYXJhbWV0ZXJzPy5kb2NzLFxuICAgIHNvdXJjZToge1xuICAgICAgb3JpZ2luYWxTb3VyY2U6IFwiKCkgPT4gPEJhc2ljVXNhZ2UgLz5cIixcbiAgICAgIC4uLl9CYXNpY1VzYWdlLnBhcmFtZXRlcnM/LmRvY3M/LnNvdXJjZVxuICAgIH1cbiAgfVxufTtcbkNvbW1hbmRMaXN0LnBhcmFtZXRlcnMgPSB7XG4gIC4uLkNvbW1hbmRMaXN0LnBhcmFtZXRlcnMsXG4gIGRvY3M6IHtcbiAgICAuLi5Db21tYW5kTGlzdC5wYXJhbWV0ZXJzPy5kb2NzLFxuICAgIHNvdXJjZToge1xuICAgICAgb3JpZ2luYWxTb3VyY2U6IFwiKCkgPT4gPENvbW1hbmRMaXN0VXNhZ2UgLz5cIixcbiAgICAgIC4uLkNvbW1hbmRMaXN0LnBhcmFtZXRlcnM/LmRvY3M/LnNvdXJjZVxuICAgIH1cbiAgfVxufTs7ZXhwb3J0IGNvbnN0IF9fbmFtZWRFeHBvcnRzT3JkZXIgPSBbXCJfQmFzaWNVc2FnZVwiLFwiQ29tbWFuZExpc3RcIl07Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/HotKeys/stories/HotKeys.stories.js\n')},"./util/getFocusableElements.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Ec: () => (/* binding */ getNextFocusable),\n/* harmony export */   Fy: () => (/* binding */ FOCUSABLE_SELECTOR),\n/* harmony export */   cE: () => (/* binding */ getPreviousFocusable),\n/* harmony export */   dm: () => (/* binding */ getLastFocusable),\n/* harmony export */   j5: () => (/* binding */ getFirstFocusable)\n/* harmony export */ });\n/* harmony import */ var lodash_first__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/lodash/first.js");\n/* harmony import */ var lodash_first__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_first__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var lodash_last__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/lodash/last.js");\n/* harmony import */ var lodash_last__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_last__WEBPACK_IMPORTED_MODULE_1__);\n/**\n * @typedef {Function} getNextFocusable()\n *    @description Returns next/previous focusable DOM element, respectively\n *   Params:\n *     @param {object} currentElement\n *       DOM element - starting element for search. Returns next focused element AFTER this element.\n *     @param {bool} includeContained\n *       Default: true. Will return the next focusable item within the current element. If false, returned\n *       element will be outside of the container,\n *      @param {bool} onlyContained\n *       Default: false. If true and includeContaining is true, the search is limited only to\n *        elements within the container.\n *     @param {bool} loop\n *       Default: true. Elements are chosen by index. If the index is beyond the end of the list,\n *       the first element will be returned.\n *       If the index is before the start of the list, the last element will be returned.\n*/\n\n\n\n\n// eslint-disable-next-line max-len\nconst FOCUSABLE_SELECTOR = \'a:not([disabled]), button:not([disabled]), input:not([disabled]), textarea:not([disabled]), select:not([disabled]), [tabindex]:not([disabled]):not([tabindex="-1"]), [tabIndex="-1"]:not([disabled]):focus\';\nfunction getVisibleFocusableElements() {\n  let container = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n  let includeContained = arguments.length > 1 ? arguments[1] : undefined;\n  let currentElement = arguments.length > 2 ? arguments[2] : undefined;\n  if (container.querySelectorAll) {\n    return Array.from(container.querySelectorAll(FOCUSABLE_SELECTOR)).filter(element => {\n      if (!includeContained) {\n        if (element === currentElement) {\n          return true;\n        }\n        if (currentElement && currentElement.contains(element)) {\n          return false;\n        }\n      }\n      if (element.matches(\'[data-focus-exclude]\')) {\n        return false;\n      }\n\n      // check for visibility while always include the current activeElement\n      return element.offsetWidth > 0 || element.offsetHeight > 0 || element === document.activeElement;\n    });\n  }\n  return [];\n}\nfunction getNextorPrevious(collection, current, loop, next) {\n  let nullOnExit = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n  let index = collection.indexOf(current);\n  if (index === -1) {\n    index = collection.indexOf(document.activeElement);\n  }\n  const nextElement = collection[index + 1];\n  const previousElement = collection[index - 1];\n\n  // First determine if travelling forwards or backwards through the list\n  if (next) {\n    // If looping then loop to beginning if nextElement is null\n    if (loop) {\n      return nextElement || collection[0];\n    }\n\n    // If nullOnExit then return null if nextElement is null\n    if (nullOnExit) {\n      return nextElement;\n    }\n\n    // Else return end of the list if nextElement is null\n    return collection[index + 1] || collection[collection.length - 1];\n  } else {\n    // If looping then loop to end if previousElement is null\n    if (loop) {\n      return previousElement || collection[collection.length - 1];\n    }\n\n    // If nullOnExit then return null if previousElement is null\n    if (nullOnExit) {\n      return previousElement;\n    }\n\n    // Else return beginning of the list if previousElement is null\n    return collection[index - 1] || collection[0];\n  }\n}\nfunction getFocusableElement(next, currentElement) {\n  let includeContained = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  let onlyContained = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  let loop = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n  let nullOnExit = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n  const container = includeContained && onlyContained ? currentElement : document;\n  const focusable = getVisibleFocusableElements(container, includeContained, currentElement);\n  if (focusable.length > 0) {\n    return getNextorPrevious(focusable, currentElement, loop, next, nullOnExit);\n  }\n  return null;\n}\nfunction getNextFocusable() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n  return getFocusableElement(true, ...args);\n}\nfunction getPreviousFocusable() {\n  for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    args[_key2] = arguments[_key2];\n  }\n  return getFocusableElement(false, ...args);\n}\nfunction getLastFocusable(container) {\n  return lodash_last__WEBPACK_IMPORTED_MODULE_1___default()(getVisibleFocusableElements(container));\n}\nfunction getFirstFocusable(container) {\n  return lodash_first__WEBPACK_IMPORTED_MODULE_0___default()(getVisibleFocusableElements(container));\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi91dGlsL2dldEZvY3VzYWJsZUVsZW1lbnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AZm9saW8vc3RyaXBlcy1jb21wb25lbnRzLy4vdXRpbC9nZXRGb2N1c2FibGVFbGVtZW50cy5qcz9mNzkxIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQHR5cGVkZWYge0Z1bmN0aW9ufSBnZXROZXh0Rm9jdXNhYmxlKClcbiAqICAgIEBkZXNjcmlwdGlvbiBSZXR1cm5zIG5leHQvcHJldmlvdXMgZm9jdXNhYmxlIERPTSBlbGVtZW50LCByZXNwZWN0aXZlbHlcbiAqICAgUGFyYW1zOlxuICogICAgIEBwYXJhbSB7b2JqZWN0fSBjdXJyZW50RWxlbWVudFxuICogICAgICAgRE9NIGVsZW1lbnQgLSBzdGFydGluZyBlbGVtZW50IGZvciBzZWFyY2guIFJldHVybnMgbmV4dCBmb2N1c2VkIGVsZW1lbnQgQUZURVIgdGhpcyBlbGVtZW50LlxuICogICAgIEBwYXJhbSB7Ym9vbH0gaW5jbHVkZUNvbnRhaW5lZFxuICogICAgICAgRGVmYXVsdDogdHJ1ZS4gV2lsbCByZXR1cm4gdGhlIG5leHQgZm9jdXNhYmxlIGl0ZW0gd2l0aGluIHRoZSBjdXJyZW50IGVsZW1lbnQuIElmIGZhbHNlLCByZXR1cm5lZFxuICogICAgICAgZWxlbWVudCB3aWxsIGJlIG91dHNpZGUgb2YgdGhlIGNvbnRhaW5lcixcbiAqICAgICAgQHBhcmFtIHtib29sfSBvbmx5Q29udGFpbmVkXG4gKiAgICAgICBEZWZhdWx0OiBmYWxzZS4gSWYgdHJ1ZSBhbmQgaW5jbHVkZUNvbnRhaW5pbmcgaXMgdHJ1ZSwgdGhlIHNlYXJjaCBpcyBsaW1pdGVkIG9ubHkgdG9cbiAqICAgICAgICBlbGVtZW50cyB3aXRoaW4gdGhlIGNvbnRhaW5lci5cbiAqICAgICBAcGFyYW0ge2Jvb2x9IGxvb3BcbiAqICAgICAgIERlZmF1bHQ6IHRydWUuIEVsZW1lbnRzIGFyZSBjaG9zZW4gYnkgaW5kZXguIElmIHRoZSBpbmRleCBpcyBiZXlvbmQgdGhlIGVuZCBvZiB0aGUgbGlzdCxcbiAqICAgICAgIHRoZSBmaXJzdCBlbGVtZW50IHdpbGwgYmUgcmV0dXJuZWQuXG4gKiAgICAgICBJZiB0aGUgaW5kZXggaXMgYmVmb3JlIHRoZSBzdGFydCBvZiB0aGUgbGlzdCwgdGhlIGxhc3QgZWxlbWVudCB3aWxsIGJlIHJldHVybmVkLlxuKi9cblxuaW1wb3J0IGZpcnN0IGZyb20gJ2xvZGFzaC9maXJzdCc7XG5pbXBvcnQgbGFzdCBmcm9tICdsb2Rhc2gvbGFzdCc7XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXG5leHBvcnQgY29uc3QgRk9DVVNBQkxFX1NFTEVDVE9SID0gJ2E6bm90KFtkaXNhYmxlZF0pLCBidXR0b246bm90KFtkaXNhYmxlZF0pLCBpbnB1dDpub3QoW2Rpc2FibGVkXSksIHRleHRhcmVhOm5vdChbZGlzYWJsZWRdKSwgc2VsZWN0Om5vdChbZGlzYWJsZWRdKSwgW3RhYmluZGV4XTpub3QoW2Rpc2FibGVkXSk6bm90KFt0YWJpbmRleD1cIi0xXCJdKSwgW3RhYkluZGV4PVwiLTFcIl06bm90KFtkaXNhYmxlZF0pOmZvY3VzJztcbmZ1bmN0aW9uIGdldFZpc2libGVGb2N1c2FibGVFbGVtZW50cygpIHtcbiAgbGV0IGNvbnRhaW5lciA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogZG9jdW1lbnQ7XG4gIGxldCBpbmNsdWRlQ29udGFpbmVkID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQ7XG4gIGxldCBjdXJyZW50RWxlbWVudCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyID8gYXJndW1lbnRzWzJdIDogdW5kZWZpbmVkO1xuICBpZiAoY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShjb250YWluZXIucXVlcnlTZWxlY3RvckFsbChGT0NVU0FCTEVfU0VMRUNUT1IpKS5maWx0ZXIoZWxlbWVudCA9PiB7XG4gICAgICBpZiAoIWluY2x1ZGVDb250YWluZWQpIHtcbiAgICAgICAgaWYgKGVsZW1lbnQgPT09IGN1cnJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN1cnJlbnRFbGVtZW50ICYmIGN1cnJlbnRFbGVtZW50LmNvbnRhaW5zKGVsZW1lbnQpKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZWxlbWVudC5tYXRjaGVzKCdbZGF0YS1mb2N1cy1leGNsdWRlXScpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gY2hlY2sgZm9yIHZpc2liaWxpdHkgd2hpbGUgYWx3YXlzIGluY2x1ZGUgdGhlIGN1cnJlbnQgYWN0aXZlRWxlbWVudFxuICAgICAgcmV0dXJuIGVsZW1lbnQub2Zmc2V0V2lkdGggPiAwIHx8IGVsZW1lbnQub2Zmc2V0SGVpZ2h0ID4gMCB8fCBlbGVtZW50ID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBbXTtcbn1cbmZ1bmN0aW9uIGdldE5leHRvclByZXZpb3VzKGNvbGxlY3Rpb24sIGN1cnJlbnQsIGxvb3AsIG5leHQpIHtcbiAgbGV0IG51bGxPbkV4aXQgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IGZhbHNlO1xuICBsZXQgaW5kZXggPSBjb2xsZWN0aW9uLmluZGV4T2YoY3VycmVudCk7XG4gIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICBpbmRleCA9IGNvbGxlY3Rpb24uaW5kZXhPZihkb2N1bWVudC5hY3RpdmVFbGVtZW50KTtcbiAgfVxuICBjb25zdCBuZXh0RWxlbWVudCA9IGNvbGxlY3Rpb25baW5kZXggKyAxXTtcbiAgY29uc3QgcHJldmlvdXNFbGVtZW50ID0gY29sbGVjdGlvbltpbmRleCAtIDFdO1xuXG4gIC8vIEZpcnN0IGRldGVybWluZSBpZiB0cmF2ZWxsaW5nIGZvcndhcmRzIG9yIGJhY2t3YXJkcyB0aHJvdWdoIHRoZSBsaXN0XG4gIGlmIChuZXh0KSB7XG4gICAgLy8gSWYgbG9vcGluZyB0aGVuIGxvb3AgdG8gYmVnaW5uaW5nIGlmIG5leHRFbGVtZW50IGlzIG51bGxcbiAgICBpZiAobG9vcCkge1xuICAgICAgcmV0dXJuIG5leHRFbGVtZW50IHx8IGNvbGxlY3Rpb25bMF07XG4gICAgfVxuXG4gICAgLy8gSWYgbnVsbE9uRXhpdCB0aGVuIHJldHVybiBudWxsIGlmIG5leHRFbGVtZW50IGlzIG51bGxcbiAgICBpZiAobnVsbE9uRXhpdCkge1xuICAgICAgcmV0dXJuIG5leHRFbGVtZW50O1xuICAgIH1cblxuICAgIC8vIEVsc2UgcmV0dXJuIGVuZCBvZiB0aGUgbGlzdCBpZiBuZXh0RWxlbWVudCBpcyBudWxsXG4gICAgcmV0dXJuIGNvbGxlY3Rpb25baW5kZXggKyAxXSB8fCBjb2xsZWN0aW9uW2NvbGxlY3Rpb24ubGVuZ3RoIC0gMV07XG4gIH0gZWxzZSB7XG4gICAgLy8gSWYgbG9vcGluZyB0aGVuIGxvb3AgdG8gZW5kIGlmIHByZXZpb3VzRWxlbWVudCBpcyBudWxsXG4gICAgaWYgKGxvb3ApIHtcbiAgICAgIHJldHVybiBwcmV2aW91c0VsZW1lbnQgfHwgY29sbGVjdGlvbltjb2xsZWN0aW9uLmxlbmd0aCAtIDFdO1xuICAgIH1cblxuICAgIC8vIElmIG51bGxPbkV4aXQgdGhlbiByZXR1cm4gbnVsbCBpZiBwcmV2aW91c0VsZW1lbnQgaXMgbnVsbFxuICAgIGlmIChudWxsT25FeGl0KSB7XG4gICAgICByZXR1cm4gcHJldmlvdXNFbGVtZW50O1xuICAgIH1cblxuICAgIC8vIEVsc2UgcmV0dXJuIGJlZ2lubmluZyBvZiB0aGUgbGlzdCBpZiBwcmV2aW91c0VsZW1lbnQgaXMgbnVsbFxuICAgIHJldHVybiBjb2xsZWN0aW9uW2luZGV4IC0gMV0gfHwgY29sbGVjdGlvblswXTtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0Rm9jdXNhYmxlRWxlbWVudChuZXh0LCBjdXJyZW50RWxlbWVudCkge1xuICBsZXQgaW5jbHVkZUNvbnRhaW5lZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogdHJ1ZTtcbiAgbGV0IG9ubHlDb250YWluZWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlO1xuICBsZXQgbG9vcCA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDogdHJ1ZTtcbiAgbGV0IG51bGxPbkV4aXQgPSBhcmd1bWVudHMubGVuZ3RoID4gNSAmJiBhcmd1bWVudHNbNV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s1XSA6IGZhbHNlO1xuICBjb25zdCBjb250YWluZXIgPSBpbmNsdWRlQ29udGFpbmVkICYmIG9ubHlDb250YWluZWQgPyBjdXJyZW50RWxlbWVudCA6IGRvY3VtZW50O1xuICBjb25zdCBmb2N1c2FibGUgPSBnZXRWaXNpYmxlRm9jdXNhYmxlRWxlbWVudHMoY29udGFpbmVyLCBpbmNsdWRlQ29udGFpbmVkLCBjdXJyZW50RWxlbWVudCk7XG4gIGlmIChmb2N1c2FibGUubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBnZXROZXh0b3JQcmV2aW91cyhmb2N1c2FibGUsIGN1cnJlbnRFbGVtZW50LCBsb29wLCBuZXh0LCBudWxsT25FeGl0KTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXROZXh0Rm9jdXNhYmxlKCkge1xuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG4gIHJldHVybiBnZXRGb2N1c2FibGVFbGVtZW50KHRydWUsIC4uLmFyZ3MpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFByZXZpb3VzRm9jdXNhYmxlKCkge1xuICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICBhcmdzW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gIH1cbiAgcmV0dXJuIGdldEZvY3VzYWJsZUVsZW1lbnQoZmFsc2UsIC4uLmFyZ3MpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldExhc3RGb2N1c2FibGUoY29udGFpbmVyKSB7XG4gIHJldHVybiBsYXN0KGdldFZpc2libGVGb2N1c2FibGVFbGVtZW50cyhjb250YWluZXIpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaXJzdEZvY3VzYWJsZShjb250YWluZXIpIHtcbiAgcmV0dXJuIGZpcnN0KGdldFZpc2libGVGb2N1c2FibGVFbGVtZW50cyhjb250YWluZXIpKTtcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./util/getFocusableElements.js\n')}}]);